# Vuex가 무엇인가요?

Vuex는 Vue.js 어플리케이션을 위한 **상태 관리 패턴 + 라이브러리** 입니다. 어플리케이션의 모든 컴포넌트를 위한 중앙 집중식 저장소를 제공하며, 예측 가능한 방식으로 상태를 바꿀 수 있습니다. 또한 Vue의 공식 [devtools 확장](https://github.com/vuejs/vue-devtools)과 통합되어, 별도의 설정이 필요 없는 디버깅, 상태 스냅샷 내보내기/들여오기 등의 고급 기능을 제공합니다.

### "상태 관리 패턴"이란 무엇인가요?

Vue로 만든 간단한 어플리케이션으로 시작해봅시다.

``` js
new Vue({
  // 상태
  data () {
    return {
      count: 0
    }
  },
  // 뷰
  template: `
    <div>{{ count }}</div>
  `,
  // 액션
  methods: {
    increment () {
      this.count++
    }
  }
})
```

이 어플리케이션은 여러 조각으로 이루어져 있습니다.

- **상태** 는 앱을 작동시키는 원본 데이터입니다.
- **뷰** 는 **상태** 를 보여주기 위한 선언적 매핑입니다.
- **액션** 은 **뷰** 에서 사용자 입력에 대해 반응적으로 상태를 바꾸는 방법입니다.

<p style="text-align: center; margin: 2em">
  <img style="max-width:450px;" src="./images/flow.png">
</p>

하지만, 이러한 단순함도 **같은 상태를 공유하는 여러 컴포넌트** 가 있는 경우 쉽게 복잡해집니다.

- 여러 뷰가 같은 상태에 의존합니다.
- 서로 다른 뷰에 대한 작업이 동시에 같은 상태를 반영해야 할 수 있습니다.


첫 번째 문제는 컴포넌트를 지나치게 중첩하면 통과하는 prop이 장황해지고 형제 컴포넌트에선 작동하지 않습니다. 두 번째 문제의 경우 부모/자식 인스턴스를 직접 참조하거나, 이벤트를 통해 직접 상태를 주고 받아서 해결해야 합니다. 이러한 패턴은 깨지기 쉽고, 갈수록 유지보수가 어려워집니다.

그렇다면 컴포넌트들이 공유하는 상태를 뽑아내서, 이를 전역 싱글톤으로 관리하면 어떨까요? 컴포넌트 트리는 하나의 큰 "뷰"가 되고, 모든 컴포넌트가 어디에 있던 상태나 액션에 접근할 수 있습니다. 또한 '상태 관리' 및 '특정 규칙 적용'과 관련된 개념을 정의하고 분리함으로써 코드가 간단하고 관리하기 쉬워집니다.

이는 [Flux](https://facebook.github.io/flux/docs/overview.html), [Redux](http://redux.js.org/), [The Elm Architecture](https://guide.elm-lang.org/architecture/)에서 영감을 받은 Vuex의 기본 아이디어입니다. 다른 패턴들과 달리, Vuex는 효율적인 업데이트를 위해 Vue.js의 세분화된 반응 시스템을 활용하도록 특별히 고안되었습니다.

![vuex](./images/vuex.png)

### 언제 사용해야 하나요?

Vuex는 공유되는 상태의 관리를 도와주지만, 시작하는 데 드는 비용과 개념에 대한 이해가 필요합니다. 그것은 단기간과 장기간 생산성 간의 기회비용이 있습니다.

대규모 SPA를 구축해본 적이 없다면, Vuex를 이해하는 데 시간이 꽤 걸릴 것입니다. 이것은 일반적인 일이고, 앱이 단순하다면 Vuex 없이 간단한 [글로벌 이벤트 버스](http://kr.vuejs.org/guide/components.html#Non-Parent-Child-Communication) 정도로 충분할지도 모릅니다. 하지만 중-대규모의 SPA를 작성한다면, 조금 더 간단하게 Vue 밖에서 상태를 처리하는 방법이 필요할지도 모르고, 여기에 Vuex가 좋은 답이 될 것입니다.

여기 Redux의 저자인 Dan Abramov의 명언이 있습니다.

> Flux 라이브러리는 안경과 같습니다; 필요할 때 알게 됩니다.
